(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-053b78c8"],{"68ac":function(e,t,a){"use strict";var r=a("d0e3"),n=a.n(r);n.a},"7ead":function(e,t,a){var r=a("24fb");t=r(!1),t.push([e.i,".zk-table[data-v-fd75036e]{margin-top:15px}.el-cascader[data-v-fd75036e]{width:100%}",""]),e.exports=t},"7f6a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("商品分类")])],1),a("el-card",[a("el-row",[a("el-col",[a("el-button",{attrs:{type:"primary"},on:{click:e.showAddCatDialog}},[e._v("添加分类")])],1)],1),a("tree-table",{attrs:{data:e.cateList,columns:e.columns,"selection-type":!1,"expand-type":!1,"show-index":"","index-text":"#",border:""},scopedSlots:e._u([{key:"isok",fn:function(t){return[!1===t.row.cat_deleted?a("i",{staticClass:"el-icon-success",staticStyle:{color:"lightgreen"}}):!0===t.row.cat_deleted?a("i",{staticClass:"el-icon-error",staticStyle:{color:"red"}}):e._e()]}},{key:"order",fn:function(t){return[0==t.row.cat_level?a("el-tag",{attrs:{size:"mini"}},[e._v("一级")]):1==t.row.cat_level?a("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("二级")]):2==t.row.cat_level?a("el-tag",{attrs:{type:"warning",size:"mini"}},[e._v("三级")]):e._e()]}},{key:"operate",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.editGoods(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.deleteGoods(t.row)}}},[e._v("删除")])]}}])}),a("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[1,2,5,10],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"添加分类",visible:e.addCateDialogVisible,width:"50%"},on:{close:e.closeDialog,"update:visible":function(t){e.addCateDialogVisible=t}}},[a("el-form",{ref:"addCatFormRef",attrs:{"label-width":"100px",model:e.addCatForm,rules:e.addCatFormRules}},[a("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[a("el-input",{model:{value:e.addCatForm.cat_name,callback:function(t){e.$set(e.addCatForm,"cat_name",t)},expression:"addCatForm.cat_name"}})],1),a("el-form-item",{attrs:{label:"父级分类"}},[a("el-cascader",{attrs:{clearable:"",options:e.parentCatlist,"show-all-levels":!1,props:e.cascaderProps,"expand-trigger":"hover"},on:{change:e.parentCatChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addCateDialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addCat}},[e._v("确定")])],1)],1)],1)},n=[],s=(a("96cf"),a("1da1")),i={data:function(){return{addCatForm:{cat_name:"",cat_pid:0,cat_level:0},cascaderProps:{label:"cat_name",value:"cat_id",children:"children",checkStrictly:!0},selectedOptions:[],parentCatlist:[],addCatFormRules:{cat_name:[{required:!0,message:"名称不能为空!",trigger:"blur"}]},queryInfo:{type:3,pagenum:1,pagesize:5},addCateDialogVisible:!1,cateList:[],total:0,columns:[{label:"分类名称",prop:"cat_name"},{label:"是否有效",prop:"cat_deleted",type:"template",template:"isok"},{label:"排序",prop:"cat_level",type:"template",template:"order"},{label:"操作",type:"template",template:"operate"}]}},created:function(){this.getCateLists()},methods:{parentCatChange:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectedOptions.length>0&&(e.addCatForm.cat_pid=e.selectedOptions[e.selectedOptions.length-1],e.addCatForm.cat_level=e.selectedOptions.length);case 1:case"end":return t.stop()}}),t)})))()},showAddCatDialog:function(){this.addCateDialogVisible=!0,this.getParentCatList()},getParentCatList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.parentCatlist.length){t.next=8;break}return t.next=3,e.$axios.get("categories",{params:{type:2}});case 3:if(a=t.sent,r=a.data,200===r.meta.status){t.next=7;break}return t.abrupt("return",e.$message.error("获取商品目录失败!"));case 7:e.parentCatlist=r.data;case 8:case"end":return t.stop()}}),t)})))()},addCat:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.addCatFormRef.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.post("categories",e.addCatForm);case 2:if(r=t.sent,n=r.data,201===n.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("添加商品目录失败!"));case 6:e.$message.success("添加商品目录成功!");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.addCateDialogVisible=!1,e.getCateLists();case 3:case"end":return t.stop()}}),t)})))()},closeDialog:function(){this.selectedOptions=[],this.addCatForm={cat_name:"",cat_pid:0,cat_level:0}},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getCateLists()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getCateLists()},getCateLists:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("categories",{params:e.queryInfo});case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取商品列表失败!"));case 6:e.cateList=r.data.result,e.total=r.data.total;case 8:case"end":return t.stop()}}),t)})))()},editGoods:function(e){},deleteGoods:function(e){}}},o=i,c=(a("68ac"),a("2877")),l=Object(c["a"])(o,r,n,!1,null,"fd75036e",null);t["default"]=l.exports},d0e3:function(e,t,a){var r=a("7ead");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("499e").default;n("27ffbfc3",r,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=chunk-053b78c8.97be496d.js.map