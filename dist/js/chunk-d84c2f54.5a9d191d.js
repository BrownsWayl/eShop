(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d84c2f54"],{"06ee":function(e,t,a){"use strict";var r=a("0eab"),n=a.n(r);n.a},"0eab":function(e,t,a){var r=a("9d89");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("499e").default;n("71479ee5",r,!0,{sourceMap:!1,shadowMode:!1})},"3b0d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("参数列表")])],1),a("el-card",[a("el-alert",{attrs:{"show-icon":"",title:"只允许三级目录设置参数!",type:"warning",closable:!1}}),a("el-row",{staticClass:"cat_opt"},[a("el-col",[a("span",[e._v("选择商品分类:")]),a("el-cascader",{attrs:{clearable:"",options:e.catlist,"show-all-levels":!1,props:e.cascaderProps,"expand-trigger":"hover"},on:{change:e.catChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1)],1),a("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"动态参数",name:"many"}},[a("el-button",{attrs:{disabled:e.isButtonDisabled,type:"primary",size:"small"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加参数")]),a("el-table",{attrs:{data:e.manyTableData,stripe:""}},[a("el-table-column",{attrs:{type:"expand"}},[void 0],2),a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{label:"参数名称",prop:"attr_name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:function(a){return e.showEditDialog(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger"},on:{click:function(a){return e.removeParams(t.row.attr_id)}}},[e._v("删除")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"静态参数",name:"only"}},[a("el-button",{attrs:{disabled:e.isButtonDisabled,type:"primary",size:"small"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加属性")]),a("el-table",{attrs:{data:e.onlyTableData,stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{label:"属性名称",prop:"attr_name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:function(a){return e.showEditDialog(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger"},on:{click:function(a){return e.removeParams(t.row.attr_id)}}},[e._v("删除")])]}}])})],1)],1)],1)],1),a("el-dialog",{attrs:{title:"many"===this.activeName?"添加动态参数":"添加静态属性",visible:e.dialogVisible,width:"50%"},on:{close:e.closeDialog,"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"formRef",attrs:{rules:e.formRules,model:e.form,"label-width":"110px"}},[a("el-form-item",{attrs:{prop:"attr_name",label:"many"===this.activeName?"动态属性":"静态属性"}},[a("el-input",{model:{value:e.form.attr_name,callback:function(t){e.$set(e.form,"attr_name",t)},expression:"form.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"}},[e._v("确定")])],1)],1),a("el-dialog",{attrs:{title:"many"===this.activeName?"修改动态参数":"修改静态属性",visible:e.editDialogVisible,width:"50%"},on:{close:e.editCloseDialog,"update:visible":function(t){e.editDialogVisible=t}}},[a("el-form",{ref:"editFormRef",attrs:{rules:e.formRules,model:e.editForm,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"attr_name",label:"many"===this.activeName?"动态属性":"静态属性"}},[a("el-input",{model:{value:e.editForm.attr_name,callback:function(t){e.$set(e.editForm,"attr_name",t)},expression:"editForm.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editParams}},[e._v("确定")])],1)],1)],1)},n=[],i=(a("99af"),a("96cf"),a("1da1")),s={data:function(){return{catlist:[],dialogVisible:!1,editDialogVisible:!1,activeName:"many",selectedOptions:[],cascaderProps:{label:"cat_name",value:"cat_id",children:"children"},manyTableData:[],onlyTableData:[],form:{},editForm:{},formRules:{attr_name:[{required:!0,message:"内容不能为空!",trigger:"blur"}]}}},created:function(){this.getCatList()},computed:{isButtonDisabled:function(){return 3!==this.selectedOptions.length},catID:function(){return 3===this.selectedOptions.length?this.selectedOptions[this.selectedOptions.length-1]:null}},methods:{removeParams:function(e){var t=this;this.$confirm("是否删除此元素?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var a=Object(i["a"])(regeneratorRuntime.mark((function a(r){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$axios.delete("categories/".concat(t.catID,"/attributes/").concat(e));case 2:if(n=a.sent,i=n.data,200===i.meta.status){a.next=6;break}return a.abrupt("return",t.$message.error("删除属性失败!"));case 6:t.$message.success("删除属性成功!"),t.getParamsData();case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){}))},editParams:function(){var e=this;this.$refs.editFormRef.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",e.$message.error("请输出有效的表单数据!"));case 2:return t.next=4,e.$axios.put("categories/".concat(e.catID,"/attributes/").concat(e.editForm.attr_id),{attr_name:e.editForm.attr_name,attr_sel:e.activeName});case 4:if(r=t.sent,n=r.data,200===n.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("修改属性失败!"));case 8:e.$message.success("修改属性成功!"),e.getParamsData(),e.editDialogVisible=!1;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},showEditDialog:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.editDialogVisible=!0,a.next=3,t.$axios.get("categories/".concat(t.catID,"/attributes/").concat(e.attr_id),{params:{attr_sel:t.activeName}});case 3:if(r=a.sent,n=r.data,200===n.meta.status){a.next=7;break}return a.abrupt("return",t.$message.error("获取属性失败!"));case 7:t.editForm=n.data;case 8:case"end":return a.stop()}}),a)})))()},closeDialog:function(){this.$refs.formRef.resetFields()},editCloseDialog:function(){this.$refs.editFormRef.resetFields()},handleTabClick:function(){this.getParamsData()},catChange:function(){3===this.selectedOptions.length?this.getParamsData():this.selectedOptions=[]},getParamsData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("categories/".concat(e.catID,"/attributes"),{params:{sel:e.activeName}});case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取属性失败!"));case 6:"many"===e.activeName?e.manyTableData=r.data:e.onlyTableData=r.data;case 7:case"end":return t.stop()}}),t)})))()},getCatList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("categories");case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取商品分类失败!"));case 6:e.catlist=r.data;case 7:case"end":return t.stop()}}),t)})))()}}},o=s,l=(a("06ee"),a("2877")),c=Object(l["a"])(o,r,n,!1,null,"2445a833",null);t["default"]=c.exports},"9d89":function(e,t,a){var r=a("24fb");t=r(!1),t.push([e.i,".cat_opt[data-v-2445a833]{margin:15px 0}",""]),e.exports=t}}]);
//# sourceMappingURL=chunk-d84c2f54.5a9d191d.js.map